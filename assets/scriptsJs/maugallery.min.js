!function(e){e.fn.mauGallery=function(a){a=e.extend(e.fn.mauGallery.defaults,a);var t=[];return this.each((function(){e.fn.mauGallery.methods.createRowWrapper(e(this)),a.lightBox&&e.fn.mauGallery.methods.createLightBox(e(this),a.lightboxId,a.navigation),e.fn.mauGallery.listeners(a),e(this).children(".gallery-item").each((function(l){e.fn.mauGallery.methods.responsiveImageItem(e(this)),e.fn.mauGallery.methods.moveItemInRowWrapper(e(this)),e.fn.mauGallery.methods.wrapItemInColumn(e(this),a.columns);var n=e(this).data("gallery-tag");a.showTags&&void 0!==n&&-1===t.indexOf(n)&&t.push(n)})),a.showTags&&e.fn.mauGallery.methods.showItemTags(e(this),a.tagsPosition,t),e(this).fadeIn(500)}))},e.fn.mauGallery.defaults={columns:3,lightBox:!0,lightboxId:null,showTags:!0,tagsPosition:"bottom",navigation:!0},e.fn.mauGallery.listeners=function(a){e(".gallery-item").on("click keydown",(function(t){if("click"===t.type||"keydown"===t.type&&"Enter"===t.key){if(!a.lightBox||"IMG"!==e(this).prop("tagName"))return;e.fn.mauGallery.methods.openLightBox(e(this),a.lightboxId)}})),e(".gallery").on("click keydown",".nav-link",(function(a){("click"===a.type||"keydown"===a.type&&"Enter"===a.key)&&(e(".nav-link").attr("aria-pressed","false"),e(this).attr("aria-pressed","true"),e.fn.mauGallery.methods.filterByTag.call(this))})),e(".gallery").on("click keydown",".mg-prev",(function(t){("click"===t.type||"keydown"===t.type&&"Enter"===t.key)&&e.fn.mauGallery.methods.prevImage(a.lightboxId)})),e(".gallery").on("click keydown",".mg-next",(function(t){("click"===t.type||"keydown"===t.type&&"Enter"===t.key)&&e.fn.mauGallery.methods.nextImage(a.lightboxId)})),e(document).on("keydown",(function(a){if(e("modal.fade").is(":visible"))switch(a.key){case"ArrowLeft":e(".mg-prev").trigger("click");break;case"ArrowRight":e(".mg-next").trigger("click");break;case"Escape":e(".modal.fade").modal("hide")}}))},e.fn.mauGallery.methods={createRowWrapper(e){e.children().first().hasClass("row")||e.append('<div class="gallery-items-row row"></div>')},wrapItemInColumn(e,a){if(a.constructor===Number)e.wrap(`<div class='item-column mb-4 col-${Math.ceil(12/a)}'></div>`);else if(a.constructor===Object){var t="";a.xs&&(t+=` col-${Math.ceil(12/a.xs)}`),a.sm&&(t+=` col-sm-${Math.ceil(12/a.sm)}`),a.md&&(t+=` col-md-${Math.ceil(12/a.md)}`),a.lg&&(t+=` col-lg-${Math.ceil(12/a.lg)}`),a.xl&&(t+=` col-xl-${Math.ceil(12/a.xl)}`),e.wrap(`<div class='item-column mb-4${t}'></div>`)}else console.error(`Columns should be defined as numbers or objects. ${typeof a} is not supported.`)},moveItemInRowWrapper(e){e.appendTo(".gallery-items-row")},responsiveImageItem(e){"IMG"===e.prop("tagName")&&e.addClass("img-fluid")},openLightBox(a,t){const l=e(`#${t}`),n=l.find(".lightboxImage"),i=a.attr("alt")||"image de la galerie",o=a.attr("src"),s=l;n.attr("src",o),n.attr("alt",i),s.modal("show")},prevImage(a){const t=e(`#${a}`).find(".lightboxImage"),l=t.attr("src"),n=e(".gallery-item:visible");let i=-1;n.each((function(a){e(this).attr("src")===l&&(i=a)}));const o=i-1<0?n.length-1:i-1,s=n.eq(o);if(s.length){const a=s.attr("alt")||"Image de la galerie";t.attr("src",s.attr("src")).attr("alt",a),e("#lightbox-caption").text(`Image suivante : ${a}`)}},nextImage(a){const t=e(`#${a}`).find(".lightboxImage"),l=t.attr("src"),n=e(".gallery-item:visible");let i=-1;n.each((function(a){e(this).attr("src")===l&&(i=a)}));const o=i+1>=n.length?0:i+1,s=n.eq(o);if(s.length){const a=s.attr("alt")||"Image de la galerie";t.attr("src",s.attr("src")).attr("alt",a),e("#lightbox-caption").text(`Image suivante : ${a}`)}},createLightBox(a,t,l){const n=t||"galleryLightbox";a.append(`<div class="modal fade"\n         id="${n}"\n         tabindex="-1"\n         role="dialog"\n         aria-label="modale de visualisation des images"\n         aria-modal="true"\n        >\n           <div class="modal-dialog" role="document">\n              <div class="modal-content">  \n               <div class="modal-header">\n                 <button type="button"\n                   class="close"\n                   data-bs-dismiss="modal"\n                   aria-label="Fermer la modale"              \n                   >\n                    <span aria-hidden="true">&times;</span>\n                </button>\n               </div>\n                    <div class="modal-body">\n                        <div class="lightbox">\n                            ${l?'<button class="mg-prev" type="button" aria-label="voir l\'image precedente"><</button>':'<span style="display:none;" />'}\n                            <img class="lightboxImage\n                             img-fluid" \n                             alt="Contenu de l'image affichée dans la modale au clique"\n                            src=""\n                            alt=""\n                            aria-label="Image agrandie dans la modale"\n                            aria-live="polite"\n                            />\n                            ${l?'<button class="mg-next" type="button" aria-label="voir l\'image suivante">></button>':'<span style="display:none;" />'}\n                         </div>  \n                      </div>\n                </div>\n              </div>\n            </div>`);const i=e(`#${n}`);i.find(".mg-prev").on("click",(()=>{e.fn.mauGallery.methods.prevImage(n)})),i.find(".mg-next").on("click",(()=>{e.fn.mauGallery.methods.nextImage(n)})),e(document).on("keydown",(function(a){if(i.is(":visible"))switch(a.key){case"ArrowLeft":e.fn.mauGallery.methods.prevImage(n);break;case"ArrowRight":e.fn.mauGallery.methods.nextImage(n);break;case"Escape":i.modal("hide")}})),i.on("hidden.bs.modal",(function(){const a=e(this).find(".lightboxImage");a.attr("src",""),a.attr("alt",""),e("#lightbox-caption").text("")}))},showItemTags(a,t,l){var n='<nav class="nav-tags"  aria-label="barre de navigation avec bouttons de filtres de la galerie de photos du portfolio de Nina Carducci">\n<div class="my-4 tags-bar nav nav-pills" role="tablist">';a.find(".gallery-item").each((function(){const a=e(this).data("gallery-tag")||"all";e(this).closest(".item-column").attr("data-gallery-tag",a)})),n+='\n           <button class="nav-link active" \n             id="all-tab"\n             data-images-toggle="all" \n             type="button" \n             role="tab"\n             aria-controls="all-panel"\n             aria-selected="true" \n             aria-label="Afficher toutes les images de la galerie">Tous</button>',e.each(l,(function(e,a){a.toLowerCase();n+=`\n                <button class="nav-link"  \n                data-images-toggle="${a}" \n                type="button"\n                role='tab'\n                aria-selected="false"\n                aria-label="Afficher les images de la catégorie ${a}"\n                >${a}</button>\n                `})),n+='\n        </div>\n      </nav>\n      <div class="gallery-items-row">',n+='\n        <div id="all-panel" role="tabpanel" aria-labelledby="all-tab" tabindex="0"></div>',e.each(l,(function(e,a){const t=`gallery-${a.toLowerCase()}`;n+=`\n        <div id="${t}-panel" role="tabpanel" aria-labelledby="${t}-tab" tabindex="0" hidden></div>`})),n+="</div>","bottom"===t?a.append(n):"top"===t?a.prepend(n):console.error(`Unknown tags position: ${t}`)},filterByTag:function(){const a=e(this),t=a.data("images-toggle"),l=a.closest(".gallery");l.find(".nav-link").each((function(){const t=e(this),l=t.is(a);t.removeClass(l?"":"active").addClass(l?"active":"").attr("aria-selected",l);const n=t.attr("aria-controls");e(`#${n}`).attr("hidden",!l)}));const n=l.find(".item-column");"all"===t?(n.show(),n.fadeIn(300)):(n.hide(),n.find(`[data-gallery-tag="${t}"]`).closest(".item-column").show().fadeIn(300))}}}(jQuery);